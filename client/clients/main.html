<template name="clientInfo">
	<h1>{{client.name}}</h1>
	{{#if sites}}
		<section class=card id='sites'>
			<h2>Sites</h2>
			{{#each sites}}
				<h3><a href="/site/{{slug}}">{{url}}</a></h3>
			{{/each}}
		</section>
	{{/if}}
	{{#with client}}
		<div class=card id='client'>
			<h2>Client Information</h2>
			<h3><input type=text class=editable name=name value={{name}}></h3>
		</div>
		<div class=card id='address'>
			<h2>Addresses</h2>
			<ul>
			{{#each addIndex address}}
				<li>{{> address}}</li>
			{{/each}}
			</ul>
			<a class='add-item address' href="#">Add Address</a>
		</div>
		<div class=card id="email_address">
			<h2>Email Addresses</h2>
			<ul>
			{{#each addIndex email_address}}
				<li>{{> email_address}}</li>
			{{/each}}
			</ul>
			<a class='add-item email_address' href="#">Add Email Address</a>
		</div>
		<div class=card id="phone_number">
			<h2>Phone Numbers</h2>
			<ul>
			{{#each addIndex phone_number}}
				<li>{{> phone_number}}</li>
			{{/each}}
			</ul>
			<a class='add-item phone_number' href="#">Add Phone Number</a>
		</div>
		<div class=card id="person">
			<h2>People</h2>
			<ul>
			{{#each addIndex person}}
				<li>{{> client__person}}</li>
			{{/each}}
			</ul>
			<a class='add-item person' href="#">Add Person</a>
		</div>
		<input type=text class=editable name=referral value={{referral}} placeholder="enter referral"><br>
		<textarea class=editable name=note value={{note}} placeholder="enter note"></textarea>
	{{/with}}
</template>



<!--
SEE ABOUT REMOVING CLASS=EDITABLE AND TARGETING BY TYPE INSTEAD
 -->

<template name="client__person">
		<button class=remove>X</button>
		<h4><input type=text class=editable name=name value={{name}} placeholder="add person's name">, <input type=text class=editable name=position value={{position}} placeholder="position"></h4><br>
		<section class='phone_number'>
			{{#if phone_number}}
				<h5>Phone Numbers</h5>
				<ul>
				{{#each addIndex phone_number}}
					<li>{{> phone_number}}</li>
				{{/each}}
				</ul>
			{{/if}}
			<!-- dry out this add-item business -->
			<a class='add-item person.{{index}}.phone_number' href="#">Add Phone Number</a>
		</section>
		<section class='email_address'>
			{{#if email_address}}
				<h5>Email Addresses</h5>
				<ul>
				{{#each addIndex email_address}}
					<li>{{> email_address}}</li>
				{{/each}}
				</ul>
			{{/if}}
			<a class='add-item person.{{index}}.email_address' href="#">Add Email Address</a>
		</section>
		<label for=public>Is public?</label>
		<input class=editable type=checkbox name=public checked="{{#if public}}checked{{/if}}"><br>
		<input type=text class=editable name=note value={{note}} placeholder="add note">
</template>




<template name="newClient">
	<h1>Add a New Client</h1>
	<form>
		<input type=text class=editable name=name placeholder=name><br>
		<input type=hidden class=slug><br>
		<textarea name=referral class=editable placeholder=referral></textarea><br>
		<input type=submit value=add>
	</form>
</template>

<template name="allClients">
	<h2>All Clients</h2>
	<ul class='allClients'>
	{{#each clients}}
		<li class="client">
			<h3><a href="/client/{{slug}}">{{name}}</a></h3>
			{{#if sites}}
				<ul>
				{{#each sites}}
					<li><a href="/site/{{slug}}">{{url}}</a></li>
				{{/each}}
				</ul>
			{{/if}}
		</li>
	{{/each}}
	</ul>
</template>