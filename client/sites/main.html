<template name="site">
	<h1>{{site.url}}</h1>
	<section id="checklists" class=card>
		<h2>Checklists</h2>
		{{#each checklists}}
			{{> site__checklist}}
		{{/each}}
		New {{{checklistTypes}}} Checklist
	</section>
	<section id="client" class=card>
		{{#if client}}
			<h2>Associated Client</h2>
			{{#with client}}
				<a href="/client/{{slug}}">{{name}}</a>
				{{#each addIndex person}}
					<div class=person>
						<h3>{{name}}</h3>
						<h4>{{position}}</h4>
						{{#each phone_number}}
							<a href='tel:{{mobileNumber}}'>{{number}}</a><br>
							{{note}}<br>
						{{/each}}
						{{#each addIndex email_address}}
							<a href='mailto:{{address}}'>{{address}}</a><br>
							{{note}}<br>
						{{/each}}
						<p>{{note}}</p>
					</div>
				{{/each}}
			{{/with}}
		{{/if}}
	</section>
	<h2>Site Information</h2>
	{{#with site}}
		<div class=card id='basicInfo'>
			<input type=text class=live-field name=url value={{url}} readonly>
			<input type=checkbox class=live-field name=secure checked='{{#if secure}}checked{{/if}}'>
			<input type=text name=organization_name value={{organization_name}} readonly>
			<select class=live-field name=billing_cycle>{{billingCycles}}</select>
		</div>
		<div class=card id='contactInfo'>
			{{#each addIndex address}}
				{{> address}}
			{{/each}}
			<a class='add-item address' href='#'>Add Address</a>
			{{#each addIndex email_address}}
				{{> email_address}}
			{{/each}}
			<a class='add-item email_address' href='#'>Add Email Address</a>
			{{#each addIndex phone_number}}
				{{> phone_number}}
			{{/each}}
			<a class='add-item phone_number' href='#'>Add Phone Number</a>
			<!-- Get person from client -->
		</div>
		<div class=card id='businessInfo'>
			{{#if service_offered}}
				<h3>Services Offered</h3>
				{{#each addIndex service_offered}}
					<div data-field=service_offered data-index={{index}}>
						<button class=remove>X</button>
						<input class=live-field name='service_offered.{{index}}' value={{value}} placeholder='Add service name' readonly><br>
					</div>
				{{/each}}
			{{/if}}
			<a class='add-item service_offered' href='#'>Add Service Offered</a>
			{{#if product_offered}}
				<h3>Products Offered</h3>
				{{#each addIndex product_offered}}
					<div data-field=product_offered data-index={{index}}>
						<button class=remove>X</button>
						<input class=live-field name='product_offered.{{index}}' value={{value}} placeholder='Add product name' readonly><br>
					</div>
				{{/each}}
			{{/if}}
			<a class='add-item product_offered' href='#'>Add Product offered</a>
			{{#if location}}
				<h3>Locations</h3>
				{{#each addIndex location}}
					<div data-field=location data-index={{index}}>
						<button class=remove>X</button>
						<input class=live-field name='location.{{index}}' value={{value}} placeholder='Add location name' readonly><br>
					</div>
				{{/each}}
			{{/if}}
			<a class='add-item location' href='#'>Add Location</a>
		</div>
		<div class=card id='involvement'>
			{{#if service_provided}}
				{{#each addIndex service_provided}}
					<div data-field=service_provided data-index={{index}}>
						<button class=remove>X</button>
						<select class=live-field name='service_provided.{{index}}'>
						{{#each provided_services}}
							<option value={{this}} selected='{{#if is_provided_service}}selected{{/if}}'>{{this}}</option>
						{{/each}}
						</select>
					</div>
				{{/each}}
			{{/if}}
			<a class='add-item service_provided' href='#'>Add Service Provided</a>
		</div>
		<!-- Status -->
		<!-- service_used -->
		<!-- file_access -->
	{{/with}}


</template>



<template name="site__checklist">
	<section class="siteChecklist">
		<h3><a href="/checklist/{{_id}}">{{title}}</a></h3>
		<progress value={{itemsChecked}} max={{itemsCount}}></progress>
	</section>
</template>


<template name="newSite">
	<h1>Add a New Site</h1>
	<form>
		<select name=client>
			<option value=''>-select a client</option>
		{{#each allClients}}
			<option value='{{value}}'>{{label}}</option>
		{{/each}}
		</select><br>
		<input type=text name=url placeholder=url><br>
		<label for=secure>Secure?</label>
		<input type=checkbox name=secure><br>
		<input type=text name=organization_name placeholder='Organization Name'><br>
		<select name=status>
			<option value=''>-site status</option>
		{{#each statusOptions}}
			<option value='{{value}}'>{{label}}</option>
		{{/each}}
		</select><br>
		<input type=submit value=add>
	</form>


</template>

<template name="allSites">
	<h2>All Sites</h2>
	<ul class='allSites'>
	{{#each sites}}
		<li class="site">
			<h3><a href="/site/{{slug}}">{{url}}</a></h3>
			<span class="client"><a href="/client/{{clientSlug}}">Client: {{clientName}}</a></span>
		</li>
	{{/each}}
	</ul>
</template>